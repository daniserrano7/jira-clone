import{j as f,a as g}from"./jsx-runtime-29545a09.js";import{$ as v,b as u,_ as p,g as x,e as _}from"./index-d3606c93.js";import{r}from"./index-76fb7be0.js";import{T as A}from"./tooltip-747c2033.js";const m="Avatar",[S,U]=v(m),[y,b]=S(m),h=r.forwardRef((a,t)=>{const{__scopeAvatar:o,...e}=a,[n,c]=r.useState("idle");return r.createElement(y,{scope:o,imageLoadingStatus:n,onImageLoadingStatusChange:c},r.createElement(u.span,p({},e,{ref:t})))}),w="AvatarImage",L=r.forwardRef((a,t)=>{const{__scopeAvatar:o,src:e,onLoadingStatusChange:n=()=>{},...c}=a,d=b(w,o),s=N(e),l=x(i=>{n(i),d.onImageLoadingStatusChange(i)});return _(()=>{s!=="idle"&&l(s)},[s,l]),s==="loaded"?r.createElement(u.img,p({},c,{ref:t,src:e})):null}),C="AvatarFallback",E=r.forwardRef((a,t)=>{const{__scopeAvatar:o,delayMs:e,...n}=a,c=b(C,o),[d,s]=r.useState(e===void 0);return r.useEffect(()=>{if(e!==void 0){const l=window.setTimeout(()=>s(!0),e);return()=>window.clearTimeout(l)}},[e]),d&&c.imageLoadingStatus!=="loaded"?r.createElement(u.span,p({},n,{ref:t})):null});function N(a){const[t,o]=r.useState("idle");return r.useEffect(()=>{if(!a){o("error");return}let e=!0;const n=new window.Image,c=d=>()=>{e&&o(d)};return o("loading"),n.onload=c("loaded"),n.onerror=c("error"),n.src=a,()=>{e=!1}},[a]),t}const I=h,M=L,j=E,$=({name:a,image:t,color:o,size:e=36,tooltip:n=!1})=>{const c=t==null?void 0:t.replace(".webp","-min.webp"),d=e>80?`/avatars/${t}`:`/avatars/${c}`,s={width:`${e}px`,minWidth:`${e}px`,height:`${e}px`},l=a.split(" ").slice(0,2).map(i=>i[0].toUpperCase()).join("");return f(A,{title:a,show:n,children:g(I,{className:"flex items-center rounded-full",style:s,children:[f(M,{className:"rounded-full object-cover",src:t&&d,style:s,alt:a}),f(j,{delayMs:0,className:"flex items-center justify-center rounded-full text-[var(--Neutral1000)]",style:{...s,backgroundColor:o,fontSize:`${e/2}px`},children:l})]})})};try{$.displayName="UserAvatar",$.__docgenInfo={description:"",displayName:"UserAvatar",props:{size:{defaultValue:{value:"36"},description:"",name:"size",required:!1,type:{name:"number"}},tooltip:{defaultValue:{value:"false"},description:"",name:"tooltip",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},image:{defaultValue:null,description:"",name:"image",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}}}}}catch{}export{$ as U};
//# sourceMappingURL=user-avatar-ac317afa.js.map
