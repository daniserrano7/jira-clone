{"version":3,"file":"user-avatar-737aede8.js","sources":["../../src/domain/user/user.ts","../../node_modules/.pnpm/@radix-ui+react-avatar@1.0.3_@types+react-dom@18.2.7_@types+react@18.2.15_react-dom@18.2.0_react@18.2.0/node_modules/@radix-ui/react-avatar/dist/index.mjs","../../src/app/components/user-avatar/user-avatar.tsx"],"sourcesContent":["export type UserId = string;\nexport type User = {\n  id: UserId;\n  name: string;\n  image?: string;\n  color?: string;\n};\n\nexport const getRandomPastelColor = () => {\n  const h = 360 * Math.random();\n  const s = 25 + 70 * Math.random();\n  const l = 85 + 10 * Math.random();\n\n  return hslToHex(h, s, l);\n};\n\nconst hslToHex = (h: number, s: number, l: number) => {\n  l /= 100;\n  const a = (s * Math.min(l, 1 - l)) / 100;\n  const transformer = (n: number) => {\n    const k = (n + h / 30) % 12;\n    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n    // convert to Hex and prefix \"0\" if needed\n    return Math.round(255 * color)\n      .toString(16)\n      .padStart(2, \"0\");\n  };\n  return `#${transformer(0)}${transformer(8)}${transformer(4)}`;\n};\n","import $8NyvN$babelruntimehelpersesmextends from \"@babel/runtime/helpers/esm/extends\";\nimport {forwardRef as $8NyvN$forwardRef, useState as $8NyvN$useState, createElement as $8NyvN$createElement, useEffect as $8NyvN$useEffect} from \"react\";\nimport {createContextScope as $8NyvN$createContextScope} from \"@radix-ui/react-context\";\nimport {useCallbackRef as $8NyvN$useCallbackRef} from \"@radix-ui/react-use-callback-ref\";\nimport {useLayoutEffect as $8NyvN$useLayoutEffect} from \"@radix-ui/react-use-layout-effect\";\nimport {Primitive as $8NyvN$Primitive} from \"@radix-ui/react-primitive\";\n\n\n\n\n\n\n\n/* -------------------------------------------------------------------------------------------------\n * Avatar\n * -----------------------------------------------------------------------------------------------*/ const $cddcb0b647441e34$var$AVATAR_NAME = 'Avatar';\nconst [$cddcb0b647441e34$var$createAvatarContext, $cddcb0b647441e34$export$90370d16b488820f] = $8NyvN$createContextScope($cddcb0b647441e34$var$AVATAR_NAME);\nconst [$cddcb0b647441e34$var$AvatarProvider, $cddcb0b647441e34$var$useAvatarContext] = $cddcb0b647441e34$var$createAvatarContext($cddcb0b647441e34$var$AVATAR_NAME);\nconst $cddcb0b647441e34$export$e2255cf6045e8d47 = /*#__PURE__*/ $8NyvN$forwardRef((props, forwardedRef)=>{\n    const { __scopeAvatar: __scopeAvatar , ...avatarProps } = props;\n    const [imageLoadingStatus, setImageLoadingStatus] = $8NyvN$useState('idle');\n    return /*#__PURE__*/ $8NyvN$createElement($cddcb0b647441e34$var$AvatarProvider, {\n        scope: __scopeAvatar,\n        imageLoadingStatus: imageLoadingStatus,\n        onImageLoadingStatusChange: setImageLoadingStatus\n    }, /*#__PURE__*/ $8NyvN$createElement($8NyvN$Primitive.span, $8NyvN$babelruntimehelpersesmextends({}, avatarProps, {\n        ref: forwardedRef\n    })));\n});\n/*#__PURE__*/ Object.assign($cddcb0b647441e34$export$e2255cf6045e8d47, {\n    displayName: $cddcb0b647441e34$var$AVATAR_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AvatarImage\n * -----------------------------------------------------------------------------------------------*/ const $cddcb0b647441e34$var$IMAGE_NAME = 'AvatarImage';\nconst $cddcb0b647441e34$export$2cd8ae1985206fe8 = /*#__PURE__*/ $8NyvN$forwardRef((props, forwardedRef)=>{\n    const { __scopeAvatar: __scopeAvatar , src: src , onLoadingStatusChange: onLoadingStatusChange = ()=>{} , ...imageProps } = props;\n    const context = $cddcb0b647441e34$var$useAvatarContext($cddcb0b647441e34$var$IMAGE_NAME, __scopeAvatar);\n    const imageLoadingStatus = $cddcb0b647441e34$var$useImageLoadingStatus(src);\n    const handleLoadingStatusChange = $8NyvN$useCallbackRef((status)=>{\n        onLoadingStatusChange(status);\n        context.onImageLoadingStatusChange(status);\n    });\n    $8NyvN$useLayoutEffect(()=>{\n        if (imageLoadingStatus !== 'idle') handleLoadingStatusChange(imageLoadingStatus);\n    }, [\n        imageLoadingStatus,\n        handleLoadingStatusChange\n    ]);\n    return imageLoadingStatus === 'loaded' ? /*#__PURE__*/ $8NyvN$createElement($8NyvN$Primitive.img, $8NyvN$babelruntimehelpersesmextends({}, imageProps, {\n        ref: forwardedRef,\n        src: src\n    })) : null;\n});\n/*#__PURE__*/ Object.assign($cddcb0b647441e34$export$2cd8ae1985206fe8, {\n    displayName: $cddcb0b647441e34$var$IMAGE_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * AvatarFallback\n * -----------------------------------------------------------------------------------------------*/ const $cddcb0b647441e34$var$FALLBACK_NAME = 'AvatarFallback';\nconst $cddcb0b647441e34$export$69fffb6a9571fbfe = /*#__PURE__*/ $8NyvN$forwardRef((props, forwardedRef)=>{\n    const { __scopeAvatar: __scopeAvatar , delayMs: delayMs , ...fallbackProps } = props;\n    const context = $cddcb0b647441e34$var$useAvatarContext($cddcb0b647441e34$var$FALLBACK_NAME, __scopeAvatar);\n    const [canRender, setCanRender] = $8NyvN$useState(delayMs === undefined);\n    $8NyvN$useEffect(()=>{\n        if (delayMs !== undefined) {\n            const timerId = window.setTimeout(()=>setCanRender(true)\n            , delayMs);\n            return ()=>window.clearTimeout(timerId)\n            ;\n        }\n    }, [\n        delayMs\n    ]);\n    return canRender && context.imageLoadingStatus !== 'loaded' ? /*#__PURE__*/ $8NyvN$createElement($8NyvN$Primitive.span, $8NyvN$babelruntimehelpersesmextends({}, fallbackProps, {\n        ref: forwardedRef\n    })) : null;\n});\n/*#__PURE__*/ Object.assign($cddcb0b647441e34$export$69fffb6a9571fbfe, {\n    displayName: $cddcb0b647441e34$var$FALLBACK_NAME\n});\n/* -----------------------------------------------------------------------------------------------*/ function $cddcb0b647441e34$var$useImageLoadingStatus(src) {\n    const [loadingStatus, setLoadingStatus] = $8NyvN$useState('idle');\n    $8NyvN$useEffect(()=>{\n        if (!src) {\n            setLoadingStatus('error');\n            return;\n        }\n        let isMounted = true;\n        const image = new window.Image();\n        const updateStatus = (status)=>()=>{\n                if (!isMounted) return;\n                setLoadingStatus(status);\n            }\n        ;\n        setLoadingStatus('loading');\n        image.onload = updateStatus('loaded');\n        image.onerror = updateStatus('error');\n        image.src = src;\n        return ()=>{\n            isMounted = false;\n        };\n    }, [\n        src\n    ]);\n    return loadingStatus;\n}\nconst $cddcb0b647441e34$export$be92b6f5f03c0fe9 = $cddcb0b647441e34$export$e2255cf6045e8d47;\nconst $cddcb0b647441e34$export$3e431a229df88919 = $cddcb0b647441e34$export$2cd8ae1985206fe8;\nconst $cddcb0b647441e34$export$fb8d7f40caaeea67 = $cddcb0b647441e34$export$69fffb6a9571fbfe;\n\n\n\n\nexport {$cddcb0b647441e34$export$90370d16b488820f as createAvatarScope, $cddcb0b647441e34$export$e2255cf6045e8d47 as Avatar, $cddcb0b647441e34$export$2cd8ae1985206fe8 as AvatarImage, $cddcb0b647441e34$export$69fffb6a9571fbfe as AvatarFallback, $cddcb0b647441e34$export$be92b6f5f03c0fe9 as Root, $cddcb0b647441e34$export$3e431a229df88919 as Image, $cddcb0b647441e34$export$fb8d7f40caaeea67 as Fallback};\n//# sourceMappingURL=index.mjs.map\n","import * as Avatar from \"@radix-ui/react-avatar\";\nimport { User, getRandomPastelColor } from \"@domain/user\";\nimport { Tooltip } from \"@app/components/tooltip\";\n\nexport const UserAvatar = ({\n  name,\n  image,\n  color,\n  size = 36,\n  tooltip = false,\n}: UserAvatarProps): JSX.Element => {\n  const imageMinName = image?.replace(\".webp\", \"-min.webp\");\n  const imageSrc = size > 80 ? `/avatars/${image}` : `/avatars/${imageMinName}`;\n  const imageSize = {\n    width: `${size}px`,\n    minWidth: `${size}px`,\n    height: `${size}px`,\n  };\n  const acronym = name\n    .split(\" \")\n    .slice(0, 2)\n    .map((word) => word[0].toUpperCase())\n    .join(\"\");\n\n  return (\n    <Tooltip title={name} show={tooltip}>\n      <Avatar.Root className=\"flex items-center rounded-full\" style={imageSize}>\n        <Avatar.Image\n          className=\"rounded-full object-cover\"\n          src={image ? imageSrc : undefined}\n          style={imageSize}\n          alt={name}\n        />\n        <Avatar.Fallback\n          delayMs={0}\n          className=\"flex items-center justify-center rounded-full text-[var(--Neutral1000)]\"\n          style={{\n            ...imageSize,\n            backgroundColor: color || getRandomPastelColor(),\n            fontSize: `${size / 2}px`,\n          }}\n        >\n          {acronym}\n        </Avatar.Fallback>\n      </Avatar.Root>\n    </Tooltip>\n  );\n};\n\ninterface UserAvatarProps extends Omit<User, \"id\"> {\n  size?: number;\n  tooltip?: boolean;\n}\n"],"names":["getRandomPastelColor","h","s","l","hslToHex","a","transformer","k","color","$cddcb0b647441e34$var$AVATAR_NAME","$cddcb0b647441e34$var$createAvatarContext","$cddcb0b647441e34$export$90370d16b488820f","$8NyvN$createContextScope","$cddcb0b647441e34$var$AvatarProvider","$cddcb0b647441e34$var$useAvatarContext","$cddcb0b647441e34$export$e2255cf6045e8d47","$8NyvN$forwardRef","props","forwardedRef","__scopeAvatar","avatarProps","imageLoadingStatus","setImageLoadingStatus","$8NyvN$useState","$8NyvN$createElement","$8NyvN$Primitive","$8NyvN$babelruntimehelpersesmextends","$cddcb0b647441e34$var$IMAGE_NAME","$cddcb0b647441e34$export$2cd8ae1985206fe8","src","onLoadingStatusChange","imageProps","context","$cddcb0b647441e34$var$useImageLoadingStatus","handleLoadingStatusChange","$8NyvN$useCallbackRef","status","$8NyvN$useLayoutEffect","$cddcb0b647441e34$var$FALLBACK_NAME","$cddcb0b647441e34$export$69fffb6a9571fbfe","delayMs","fallbackProps","canRender","setCanRender","$8NyvN$useEffect","timerId","loadingStatus","setLoadingStatus","isMounted","image","updateStatus","$cddcb0b647441e34$export$be92b6f5f03c0fe9","$cddcb0b647441e34$export$3e431a229df88919","$cddcb0b647441e34$export$fb8d7f40caaeea67","UserAvatar","name","size","tooltip","imageMinName","imageSrc","imageSize","acronym","word","jsx","Tooltip","jsxs","Avatar.Root","Avatar.Image","Avatar.Fallback"],"mappings":"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","x_google_ignoreList":[1]}