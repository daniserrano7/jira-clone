import{j as a,a as v,F as z}from"./jsx-runtime-29545a09.js";import{w as $}from"./utils-ec5c112f.js";import{r as s}from"./index-76fb7be0.js";import{t as B}from"./classix-ee785c7e.js";import{a as A}from"./index.esm-52b74111.js";import{P as W}from"./priority-icon-c8374029.js";import{g as Y}from"./index-9d890d39.js";import{L as G}from"./theme.store-728ca3dd.js";import{g as J}from"./_commonjsHelpers-de833af9.js";import"./create-remix-stub-66dc0a2f.js";import"./iframe-5a88b92a.js";import"../sb-preview/runtime.js";import"./user.mock-b5d38c63.js";import"./iconBase-1d38e9b4.js";import"./index.esm-baa42f24.js";const K=s.createContext({dragDropManager:void 0});function g(t,e,...r){if(Q()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Q(){return typeof process<"u"&&process.env.NODE_ENV==="production"}var X=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var c=o[i];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r};const Z=J(X),m=typeof window<"u"?s.useLayoutEffect:s.useEffect;function ee(t,e,r){const[n,i]=s.useState(()=>e(t)),o=s.useCallback(()=>{const c=e(t);Z(n,c)||(i(c),r&&r())},[n,t,r]);return m(o),[n,o]}function te(t,e,r){const[n,i]=ee(t,e,r);return m(function(){const c=t.getHandlerId();if(c!=null)return t.subscribeToStateChange(i,{handlerIds:[c]})},[t,i]),n}function re(t,e,r){return te(e,t||(()=>({})),()=>r.reconnect())}function ne(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),s.useMemo(()=>typeof t=="function"?t():t,r)}function ie(t){return s.useMemo(()=>t.hooks.dragSource(),[t])}function oe(t){return s.useMemo(()=>t.hooks.dragPreview(),[t])}let D=!1,I=!1;class se{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){g(!D,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return D=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{D=!1}}isDragging(){if(!this.sourceId)return!1;g(!I,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return I=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{I=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}function ae(t,e,r){const n=r.getRegistry(),i=n.addSource(t,e);return[i,()=>n.removeSource(i)]}function O(t,e,r,n){let i=r?r.call(n,t,e):void 0;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const o=Object.keys(t),c=Object.keys(e);if(o.length!==c.length)return!1;const u=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<o.length;l++){const d=o[l];if(!u(d))return!1;const P=t[d],b=e[d];if(i=r?r.call(n,P,b,d):void 0,i===!1||i===void 0&&P!==b)return!1}return!0}function x(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ce(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function ue(t){return(e=null,r=null)=>{if(!s.isValidElement(e)){const o=e;return t(o,r),o}const n=e;return ce(n),de(n,r?o=>t(o,r):t)}}function le(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const i=ue(n);e[r]=()=>i}}),e}function M(t,e){typeof t=="function"?t(e):t.current=e}function de(t,e){const r=t.ref;return g(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?s.cloneElement(t,{ref:n=>{M(r,n),M(e,n)}}):s.cloneElement(t,{ref:e})}class ge{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!O(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!O(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=le({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,x(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,x(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}function C(){const{dragDropManager:t}=s.useContext(K);return g(t!=null,"Expected drag drop context"),t}function fe(t,e){const r=C(),n=s.useMemo(()=>new ge(r.getBackend()),[r]);return m(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),m(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function pe(){const t=C();return s.useMemo(()=>new se(t),[t])}class he{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,i=this.monitor,{isDragging:o}=n;return o?o(i):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function me(t,e,r){const n=s.useMemo(()=>new he(t,e,r),[e,r]);return s.useEffect(()=>{n.spec=t},[t]),n}function ye(t){return s.useMemo(()=>{const e=t.type;return g(e!=null,"spec.type must be defined"),e},[t])}function Se(t,e,r){const n=C(),i=me(t,e,r),o=ye(t);m(function(){if(o!=null){const[u,l]=ae(o,i,n);return e.receiveHandlerId(u),r.receiveHandlerId(u),l}},[n,e,r,i,o])}function ve(t,e){const r=ne(t,e);g(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=pe(),i=fe(r.options,r.previewOptions);return Se(r,n,i),[re(r.collect,n,i),ie(i),oe(i)]}const w=({size:t=24,className:e=""})=>a("span",{className:"relative flex items-center before:absolute before:inset-1/2 before:h-3/4 before:w-3/4 before:-translate-x-1/2 before:-translate-y-1/2 before:bg-white",children:a(A,{fill:"#4BADE8",className:B("relative",e),size:t})});try{w.displayName="TaskIcon",w.__docgenInfo={description:"",displayName:"TaskIcon",props:{size:{defaultValue:{value:"24"},description:"",name:"size",required:!1,type:{name:"number"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const De=["date","priority"],Ie={date:"Date",priority:"Priority"};Object.entries(Ie).map(([t,e])=>({id:t,label:e}));const we=t=>De.includes(t),Ce=()=>{const[t]=Y(),e=t.get("sortBy");return we(e)?e:null},R=({issue:t,categoryId:e,isSubmitting:r,handleDragging:n})=>{const i=t.id.split("-")[0],o=Ce(),c=o?`issue/${t.id}?sortBy=${o}`:`issue/${t.id}`,[{isDragging:u},l]=ve(()=>({type:Pe,item:{issueId:t.id,categoryId:e},collect:d=>({isDragging:!!d.isDragging()})}),[t.id]);return s.useEffect(()=>{n(u)},[u,n]),a("div",{ref:r?void 0:l,children:a(y,{link:c,name:t.name,priorityId:t.priority.id,idPrefix:i,isSubmitting:r})})},y=({link:t,name:e,priorityId:r,idPrefix:n,isSubmitting:i})=>a("div",{style:{minWidth:"200px"},className:B("flex w-full cursor-pointer flex-col rounded border-none bg-elevation-surface-raised p-3 text-left shadow-xs duration-200 ease-in-out hover:bg-elevation-surface-raised-hovered active:bg-elevation-surface-raised-pressed",i&&"opacity-50"),children:a(G,{to:t,children:v(z,{children:[a("p",{className:"line-clamp-2 min-h-[48px] w-full text-font",children:e}),v("div",{className:"flex items-center justify-between pt-4",children:[v("span",{className:"flex items-center",children:[a(w,{size:18}),a("span",{className:"ml-1.5 text-2xs text-font-subtlest",children:n})]}),a(W,{priority:r})]})]})})}),Pe="ISSUE_CARD";try{R.displayName="IssueCard",R.__docgenInfo={description:"",displayName:"IssueCard",props:{issue:{defaultValue:null,description:"",name:"issue",required:!0,type:{name:"Issue"}},categoryId:{defaultValue:null,description:"",name:"categoryId",required:!0,type:{name:"string"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!0,type:{name:"boolean"}},handleDragging:{defaultValue:null,description:"",name:"handleDragging",required:!0,type:{name:"(isDragging: boolean) => void"}}}}}catch{}try{y.displayName="IssueCardContent",y.__docgenInfo={description:"",displayName:"IssueCardContent",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},priorityId:{defaultValue:null,description:"",name:"priorityId",required:!0,type:{name:"enum",value:[{value:'"low"'},{value:'"medium"'},{value:'"high"'}]}},idPrefix:{defaultValue:null,description:"",name:"idPrefix",required:!0,type:{name:"string"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!0,type:{name:"boolean"}}}}}catch{}const Ue={title:"Pages/Project/IssueCard",component:y,parameters:{layout:"centered"},argTypes:{link:{defaultValue:"https://google.com",control:{type:"text"}},name:{defaultValue:"Issue name",control:{type:"text"}},priorityId:{defaultValue:"high",control:{type:"text"}},idPrefix:{defaultValue:"1234",control:{type:"text"}},isSubmitting:{defaultValue:!1,control:{type:"boolean"}}},decorators:[t=>$(a("div",{style:{width:230},children:a(t,{})}))]},S={render:()=>a("div",{className:"flex flex-col gap-4",children:[f,p,h].map(({args:t},e)=>a(y,{link:(t==null?void 0:t.link)||"https://google.com",name:(t==null?void 0:t.name)||"Issue name",priorityId:(t==null?void 0:t.priorityId)||"low",idPrefix:(t==null?void 0:t.idPrefix)||"1234",isSubmitting:(t==null?void 0:t.isSubmitting)||!1},e))})},f={args:{link:"https://google.com",name:"Issue 1",priorityId:"high",idPrefix:"1234",isSubmitting:!1}},p={args:{link:"https://google.com",name:"This is a very long issue name that should be truncated",priorityId:"high",idPrefix:"1234",isSubmitting:!1}},h={args:{link:"https://google.com",name:"Submitting issue",priorityId:"low",idPrefix:"1234",isSubmitting:!0}};var k,_,N;S.parameters={...S.parameters,docs:{...(k=S.parameters)==null?void 0:k.docs,source:{originalSource:`{
  render: () => <div className="flex flex-col gap-4">
      {[Standard, LongName, Submitting].map(({
      args
    }, index) => <IssueCardContent key={index} link={args?.link || "https://google.com"} name={args?.name || "Issue name"} priorityId={args?.priorityId || "low"} idPrefix={args?.idPrefix || "1234"} isSubmitting={args?.isSubmitting || false} />)}
    </div>
}`,...(N=(_=S.parameters)==null?void 0:_.docs)==null?void 0:N.source}}};var E,T,V;f.parameters={...f.parameters,docs:{...(E=f.parameters)==null?void 0:E.docs,source:{originalSource:`{
  args: {
    link: "https://google.com",
    name: "Issue 1",
    priorityId: "high",
    idPrefix: "1234",
    isSubmitting: false
  }
}`,...(V=(T=f.parameters)==null?void 0:T.docs)==null?void 0:V.source}}};var q,H,j;p.parameters={...p.parameters,docs:{...(q=p.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {
    link: "https://google.com",
    name: "This is a very long issue name that should be truncated",
    priorityId: "high",
    idPrefix: "1234",
    isSubmitting: false
  }
}`,...(j=(H=p.parameters)==null?void 0:H.docs)==null?void 0:j.source}}};var L,U,F;h.parameters={...h.parameters,docs:{...(L=h.parameters)==null?void 0:L.docs,source:{originalSource:`{
  args: {
    link: "https://google.com",
    name: "Submitting issue",
    priorityId: "low",
    idPrefix: "1234",
    isSubmitting: true
  }
}`,...(F=(U=h.parameters)==null?void 0:U.docs)==null?void 0:F.source}}};const Fe=["Default","Standard","LongName","Submitting"];export{S as Default,p as LongName,f as Standard,h as Submitting,Fe as __namedExportsOrder,Ue as default};
//# sourceMappingURL=issue-card.stories-0399b023.js.map
